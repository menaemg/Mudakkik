<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;
use App\Models\User;
use App\Models\Category;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Post>
 */
class PostFactory extends Factory
{
    /**
     * Arabic news titles for realistic demo data
     */
    private static array $newsTitles = [
        // Politics
        'قمة عربية استثنائية لبحث التحديات الإقليمية الراهنة',
        'اتفاقية تعاون اقتصادي جديدة بين دول الخليج',
        'تطورات دبلوماسية مهمة في العلاقات السعودية الإماراتية',
        'إعلان خطة تنموية شاملة لدعم الاقتصاد الوطني',
        'قرارات جديدة لتسهيل الاستثمار الأجنبي',
        
        // Technology
        'إطلاق منصة ذكاء اصطناعي سعودية لدعم الابتكار',
        'تطبيق جديد يُحدث ثورة في خدمات التعليم الإلكتروني',
        'استثمارات ضخمة في قطاع التقنية المالية بالمنطقة',
        'مدينة نيوم تكشف عن أحدث تقنيات الطاقة النظيفة',
        'شراكة استراتيجية لتطوير الحوسبة السحابية عربياً',
        
        // Economy
        'ارتفاع أسعار النفط يدعم اقتصادات دول الخليج',
        'البنك المركزي يعلن خفض أسعار الفائدة',
        'نمو قياسي في قطاع السياحة خلال الربع الأول',
        'استثمارات بالمليارات في مشاريع البنية التحتية',
        'البورصة السعودية تسجل مستويات تاريخية جديدة',
        
        // Sports
        'المنتخب الوطني يتأهل لنهائيات كأس آسيا',
        'صفقة انتقال نجم عالمي للدوري السعودي',
        'نادي الهلال يحقق لقب دوري أبطال آسيا',
        'تحضيرات مكثفة لاستضافة كأس العالم',
        'إنجاز تاريخي للرياضة العربية في الأولمبياد',
        
        // Health
        'إطلاق حملة تطعيم وطنية شاملة',
        'افتتاح أكبر مستشفى تخصصي في الشرق الأوسط',
        'دراسة جديدة تكشف فوائد صحية مذهلة للصيام',
        'تطوير علاج مبتكر للأمراض المزمنة',
        'برنامج لتعزيز الصحة النفسية في المدارس',
        
        // Education
        'إطلاق برنامج ابتعاث جديد للدراسات العليا',
        'جامعة سعودية تحقق تصنيفاً عالمياً متقدماً',
        'مبادرة لتعليم البرمجة في المدارس الابتدائية',
        'افتتاح فرع لجامعة عالمية في المملكة',
        'منح دراسية لدعم البحث العلمي والابتكار',
    ];

    private static array $paragraphs = [
        'في تطور لافت يعكس التحولات الكبرى التي تشهدها المنطقة، أعلنت الجهات المختصة عن خطوات جديدة تهدف إلى تعزيز التنمية المستدامة وتحقيق رؤية المملكة 2030. وتأتي هذه الخطوة في إطار الجهود المتواصلة لتنويع مصادر الدخل وتعزيز الشراكات الاستراتيجية.',
        
        'أكد المسؤولون أن هذه المبادرة ستسهم في خلق فرص عمل جديدة وتعزيز الاقتصاد الوطني، مشيرين إلى أن الخطط المستقبلية تتضمن استثمارات ضخمة في مختلف القطاعات الحيوية. كما شددوا على أهمية التعاون بين القطاعين العام والخاص لتحقيق الأهداف المرجوة.',
        
        'من جانبهم، رحب الخبراء والمحللون بهذه الخطوة، معتبرين إياها نقلة نوعية في المسيرة التنموية. وأشاروا إلى أن التوقيت مناسب لتنفيذ مثل هذه المشاريع الطموحة، خاصة في ظل الظروف الاقتصادية المواتية والدعم الحكومي المتواصل.',
        
        'وفي السياق ذاته، أوضح المتحدث الرسمي أن المرحلة الأولى من المشروع ستبدأ خلال الأشهر القادمة، على أن يتم استكمال كافة المراحل خلال خمس سنوات. وأضاف أن فريقاً متخصصاً سيتولى متابعة التنفيذ وضمان الالتزام بأعلى معايير الجودة.',
        
        'يُذكر أن هذه المبادرة تأتي ضمن سلسلة من الإجراءات التي اتخذتها الحكومة مؤخراً لدفع عجلة التنمية. وقد لاقت هذه الجهود إشادة دولية واسعة، حيث أشارت تقارير المنظمات الدولية إلى التقدم الملموس الذي تحققه المملكة في مختلف المجالات.',
    ];

    public function definition(): array
    {
        $title = fake()->randomElement(self::$newsTitles);
        $body = implode("\n\n", fake()->randomElements(self::$paragraphs, 3));
        $category = Category::inRandomOrder()->first();

        return [
            'title' => $title,
            'slug' => Str::slug($title) . '-' . Str::random(6),
            'body' => $body,
            'image' => null,
            'user_id' => User::factory(),
            'category_id' => $category?->id ?? 1,
            'status' => fake()->randomElement(['published', 'published', 'published', 'pending']),
            'type' => fake()->randomElement(['news', 'news', 'article']),
            'ai_verdict' => fake()->randomElement(['trusted', 'trusted', 'trusted', 'checking']),
            'views' => fake()->numberBetween(100, 50000),
        ];
    }

    public function published(): static
    {
        return $this->state(fn (array $attributes) => [
            'status' => 'published',
        ]);
    }

    public function trusted(): static
    {
        return $this->state(fn (array $attributes) => [
            'ai_verdict' => 'trusted',
        ]);
    }
}
